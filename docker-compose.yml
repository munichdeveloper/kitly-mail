version: '3.8'

services:
  kitly-mail:
    build: .
    container_name: kitly-mail-service
    environment:
      SPRING_PROFILES_ACTIVE: prod
      SPRING_DATASOURCE_USERNAME: ${POSTGRES_USER:-kitlyuser}
      SPRING_DATASOURCE_PASSWORD: ${POSTGRES_PASSWORD:-kitlypass}
      APP_API_KEY: ${APP_API_KEY:-change-this-default-api-key}
      APP_USERNAME: ${APP_USERNAME:-admin}
      APP_PASSWORD: ${APP_PASSWORD:-admin}
      MAIL_PROVIDER: ${MAIL_PROVIDER:-smtp2go}
      VIRTUAL_HOST: ${VIRTUAL_HOST:-mail.yourdomain.de}
      LETSENCRYPT_HOST: ${VIRTUAL_HOST:-mail.yourdomain.de}
      LETSENCRYPT_EMAIL: ${LETSENCRYPT_EMAIL:-yourmail+letsencrypt@mailprovider.com}
      SMTP2GO_API_KEY: ${SMTP2GO_API_KEY:-your-smtp2go-api-key}
    networks:
      - auto-proxy
    restart: unless-stopped

networks:
  auto-proxy:
    external: true
